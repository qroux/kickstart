_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[11],{Mybo:function(e,t,a){"use strict";a.r(t);var r=a("o0o1"),n=a.n(r),c=a("HaE+"),l=a("1OyB"),s=a("vuIU"),i=a("Ji7U"),o=a("md7G"),u=a("foSv"),p=a("q1tI"),d=a.n(p),b=a("pVnL"),f=a.n(b),v=(a("Wt1U"),a("3WF5")),O=a.n(v),j=a("TSYQ"),m=a.n(j),h=(a("c31U"),a("ZeOK")),g=a("ICNK"),y=a("Y53p"),w=a("H+2d");function N(e){var t=e.children,a=e.className,r=m()(a),n=Object(g.a)(N,e),c=Object(y.a)(N,e);return d.a.createElement(c,f()({},n,{className:r}),t)}N.handledProps=["as","children","className"],N.defaultProps={as:"tbody"},N.propTypes={};var A=N,P=a("MZgk"),R=a("D1pA");function x(e){var t=e.active,a=e.children,r=e.className,n=e.collapsing,c=e.content,l=e.disabled,s=e.error,i=e.icon,o=e.negative,u=e.positive,p=e.selectable,b=e.singleLine,v=e.textAlign,O=e.verticalAlign,j=e.warning,N=e.width,A=m()(Object(h.a)(t,"active"),Object(h.a)(n,"collapsing"),Object(h.a)(l,"disabled"),Object(h.a)(s,"error"),Object(h.a)(o,"negative"),Object(h.a)(u,"positive"),Object(h.a)(p,"selectable"),Object(h.a)(b,"single line"),Object(h.a)(j,"warning"),Object(h.d)(v),Object(h.f)(O),Object(h.g)(N,"wide"),r),P=Object(g.a)(x,e),C=Object(y.a)(x,e);return w.a.isNil(a)?d.a.createElement(C,f()({},P,{className:A}),R.a.create(i),c):d.a.createElement(C,f()({},P,{className:A}),a)}x.handledProps=["active","as","children","className","collapsing","content","disabled","error","icon","negative","positive","selectable","singleLine","textAlign","verticalAlign","warning","width"],x.defaultProps={as:"td"},x.propTypes={},x.create=Object(P.e)(x,(function(e){return{content:e}}));var C=x;function E(e){var t=e.children,a=e.className,r=e.content,n=e.fullWidth,c=m()(Object(h.a)(n,"full-width"),a),l=Object(g.a)(E,e),s=Object(y.a)(E,e);return d.a.createElement(s,f()({},l,{className:c}),w.a.isNil(t)?r:t)}E.handledProps=["as","children","className","content","fullWidth"],E.defaultProps={as:"thead"},E.propTypes={};var k=E;function q(e){var t=e.as,a=Object(g.a)(q,e);return d.a.createElement(k,f()({},a,{as:t}))}q.handledProps=["as"],q.propTypes={},q.defaultProps={as:"tfoot"};var _=q;function T(e){var t=e.as,a=e.className,r=e.sorted,n=m()(Object(h.e)(r,"sorted"),a),c=Object(g.a)(T,e);return d.a.createElement(C,f()({},c,{as:t,className:n}))}T.handledProps=["as","className","sorted"],T.propTypes={},T.defaultProps={as:"th"};var B=T;function D(e){var t=e.active,a=e.cellAs,r=e.cells,n=e.children,c=e.className,l=e.disabled,s=e.error,i=e.negative,o=e.positive,u=e.textAlign,p=e.verticalAlign,b=e.warning,v=m()(Object(h.a)(t,"active"),Object(h.a)(l,"disabled"),Object(h.a)(s,"error"),Object(h.a)(i,"negative"),Object(h.a)(o,"positive"),Object(h.a)(b,"warning"),Object(h.d)(u),Object(h.f)(p),c),j=Object(g.a)(D,e),N=Object(y.a)(D,e);return w.a.isNil(n)?d.a.createElement(N,f()({},j,{className:v}),O()(r,(function(e){return C.create(e,{defaultProps:{as:a}})}))):d.a.createElement(N,f()({},j,{className:v}),n)}D.handledProps=["active","as","cellAs","cells","children","className","disabled","error","negative","positive","textAlign","verticalAlign","warning"],D.defaultProps={as:"tr",cellAs:"td"},D.propTypes={},D.create=Object(P.e)(D,(function(e){return{cells:e}}));var L=D;function z(e){var t=e.attached,a=e.basic,r=e.celled,n=e.children,c=e.className,l=e.collapsing,s=e.color,i=e.columns,o=e.compact,u=e.definition,p=e.fixed,b=e.footerRow,v=e.headerRow,j=e.inverted,N=e.padded,P=e.renderBodyRow,R=e.selectable,x=e.singleLine,C=e.size,E=e.sortable,q=e.stackable,T=e.striped,B=e.structured,D=e.tableData,F=e.textAlign,H=e.unstackable,I=e.verticalAlign,W=m()("ui",s,C,Object(h.a)(r,"celled"),Object(h.a)(l,"collapsing"),Object(h.a)(u,"definition"),Object(h.a)(p,"fixed"),Object(h.a)(j,"inverted"),Object(h.a)(R,"selectable"),Object(h.a)(x,"single line"),Object(h.a)(E,"sortable"),Object(h.a)(q,"stackable"),Object(h.a)(T,"striped"),Object(h.a)(B,"structured"),Object(h.a)(H,"unstackable"),Object(h.b)(t,"attached"),Object(h.b)(a,"basic"),Object(h.b)(o,"compact"),Object(h.b)(N,"padded"),Object(h.d)(F),Object(h.f)(I),Object(h.g)(i,"column"),"table",c),J=Object(g.a)(z,e),S=Object(y.a)(z,e);return w.a.isNil(n)?d.a.createElement(S,f()({},J,{className:W}),v&&d.a.createElement(k,null,L.create(v,{defaultProps:{cellAs:"th"}})),d.a.createElement(A,null,P&&O()(D,(function(e,t){return L.create(P(e,t))}))),b&&d.a.createElement(_,null,L.create(b))):d.a.createElement(S,f()({},J,{className:W}),n)}z.handledProps=["as","attached","basic","celled","children","className","collapsing","color","columns","compact","definition","fixed","footerRow","headerRow","inverted","padded","renderBodyRow","selectable","singleLine","size","sortable","stackable","striped","structured","tableData","textAlign","unstackable","verticalAlign"],z.defaultProps={as:"table"},z.propTypes={},z.Body=A,z.Cell=C,z.Footer=_,z.Header=k,z.HeaderCell=B,z.Row=L;var F=z,H=a("QetY"),I=a("8cHP"),W=a("plLG"),J=a("VC3L"),S=a("JX7q"),U=a("rePB"),M=a("oZBQ"),Q=d.a.createElement;function X(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=Object(u.a)(e);if(t){var n=Object(u.a)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return Object(o.a)(this,a)}}var Y=function(e){Object(i.a)(a,e);var t=X(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return e=t.call.apply(t,[this].concat(s)),Object(U.a)(Object(S.a)(e),"onApprove",Object(c.a)(n.a.mark((function t(){var a,r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(J.a)(e.props.address),t.next=3,M.a.eth.getAccounts();case 3:return r=t.sent,t.next=6,a.methods.approveRequest(e.props.id).send({from:r[0]});case 6:case"end":return t.stop()}}),t)})))),Object(U.a)(Object(S.a)(e),"onFinalize",Object(c.a)(n.a.mark((function t(){var a,r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(J.a)(e.props.address),t.next=3,M.a.eth.getAccounts();case 3:return r=t.sent,t.next=6,a.methods.finalizeRequest(e.props.id).send({from:r[0]});case 6:case"end":return t.stop()}}),t)})))),e}return Object(s.a)(a,[{key:"render",value:function(){var e=F.Row,t=F.Cell,a=this.props,r=a.id,n=a.request,c=a.approversCount,l=n.approvalCount>c/2;return Q(e,{disabled:n.complete,positive:l&&!n.complete},Q(t,null,r),Q(t,null,n.description),Q(t,null,M.a.utils.fromWei(n.value,"ether")),Q(t,null,n.recipient),Q(t,null,n.approvalCount,"/",c),Q(t,null,n.complete?null:Q(H.a,{color:"green",basic:!0,onClick:this.onApprove},"Approve")),Q(t,null,n.complete?null:Q(H.a,{color:"teal",basic:!0,onClick:this.onFinalize},"Finalize")))}}]),a}(p.Component),Z=d.a.createElement;function G(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=Object(u.a)(e);if(t){var n=Object(u.a)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return Object(o.a)(this,a)}}var K=function(e){Object(i.a)(a,e);var t=G(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"renderRows",value:function(){var e=this;return this.props.requests.map((function(t,a){return Z(Y,{key:a,id:a,request:t,address:e.props.address,approversCount:e.props.approversCount})}))}},{key:"render",value:function(){var e=F.Header,t=F.Row,a=F.HeaderCell,r=F.Body;return Z(W.a,null,Z("h3",null,"Requests"),Z(I.Link,{route:"/campaigns/".concat(this.props.address,"/requests/new")},Z("a",null,Z(H.a,{primary:!0,floated:"right",style:{marginBottom:10}},"Add Request"))),Z(F,null,Z(e,null,Z(t,null,Z(a,null,"ID"),Z(a,null,"Description"),Z(a,null,"Price(eth)"),Z(a,null,"Recipient Address"),Z(a,null,"Approval Count"),Z(a,null,"Approve"),Z(a,null,"Finalize"))),Z(r,null,this.renderRows())),Z("div",null,"Found ",this.props.requestCount," requests."))}}],[{key:"getInitialProps",value:function(){var e=Object(c.a)(n.a.mark((function e(t){var a,r,c,l,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.query.address,r=Object(J.a)(a),e.next=4,r.methods.getRequestsCount().call();case 4:return c=e.sent,e.next=7,r.methods.approversCount().call();case 7:return l=e.sent,e.next=10,Promise.all(Array(parseInt(c)).fill().map((function(e,t){return r.methods.requests(t).call()})));case 10:return s=e.sent,e.abrupt("return",{address:a,requests:s,requestCount:c,approversCount:l});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),a}(p.Component);t.default=K},"m/hO":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/campaigns/requests",function(){return a("Mybo")}])},rePB:function(e,t,a){"use strict";function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",(function(){return r}))}},[["m/hO",0,2,1,3,4]]]);